# Task ID: 7
# Title: Integrate Airtable Persona Fetching into PersonaManager
# Status: pending
# Dependencies: 4
# Priority: high
# Description: Refactor `PersonaManager.fetchPersonaTemplate` to delegate data fetching to the new `AirtableProvider`.
# Details:
Implement a private method, `_buildPersonaTemplate`, to construct the final persona string from the raw data fetched from Airtable, mimicking the original file structure.

# Test Strategy:
Unit test `PersonaManager` to ensure it correctly fetches persona data via `AirtableProvider` and builds the template.

# Subtasks:
## 1. Refactor fetchPersonaTemplate method signature [pending]
### Dependencies: None
### Description: Update the method signature to accept AirtableProvider and handle the new data source
### Details:
- Modify method signature to accept AirtableProvider instance
- Update method documentation and type definitions
- Ensure backward compatibility if needed
- Add error handling for AirtableProvider failures

## 2. Implement data transformation from Airtable to internal format [pending]
### Dependencies: None
### Description: Transform Airtable persona data to match the expected internal data structure
### Details:
- Map Airtable fields to internal persona structure
- Handle data type conversions and validation
- Implement fallback values for missing fields
- Add data sanitization and cleaning
- Ensure data consistency with existing format

## 3. Add error handling and fallback mechanisms [pending]
### Dependencies: None
### Description: Implement robust error handling for Airtable integration with fallback to existing data sources
### Details:
- Handle Airtable API failures gracefully
- Implement fallback to existing file-based data if available
- Add logging for debugging and monitoring
- Implement retry logic for transient failures
- Add user-friendly error messages

